// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           Int           @id @default(autoincrement())
  email        String        @unique
  password     String
  role         String        // Role of the user (e.g., "admin", "agency")
  location     String?       // Location of the agency (e.g., "Maubeuge")
  transactions Transaction[] // Relation to transactions
}

model Transaction {
  id                Int      @id @default(autoincrement())
  date              DateTime
  clientName        String
  factureNumber     String   @default("N/A")
  clientMail        String?  // Optionnel
  phone             String?  // Optionnel
  adresse           String
  codePostal        String
  ville             String
  orderNumber       String
  designation       String
  weight            Float
  carats            String
  unitPrice         Float
  amount            Float
  paiement          String   @default("non spécifié")
  location          String?  // Optionnel
  jewelryPhotoUrl   String?  // URL de la photo du bijou dans Google Drive
  paymentProofUrl   String?  // URL de la preuve de paiement dans Google Drive
  userId            Int?     // Foreign key to User Optionnel
  user              User?    @relation(fields: [userId], references: [id]) // Relation à User
}